# INTERCONNECT システム要件定義書

## 1. プロジェクト概要

### 1.1 システム名
INTERCONNECT（インターコネクト）

### 1.2 システムの目的
ビジネスプロフェッショナル向けのマッチングプラットフォームを提供し、適切なビジネスパートナーや協業相手を見つけることを支援する。

### 1.3 主要機能
- ユーザー認証・プロファイル管理
- AIを活用したマッチング機能
- リアルタイムメッセージング
- イベント管理
- ダッシュボード分析

## 2. システムアーキテクチャ

### 2.1 技術スタック
- **フロントエンド**: 
  - HTML5, CSS3, JavaScript (ES6+)
  - レスポンシブデザイン対応
  - プログレッシブウェブアプリ（PWA）対応
  
- **バックエンド**: 
  - Supabase (PostgreSQL + リアルタイムサブスクリプション)
  - Row Level Security (RLS) による認証・認可
  
- **インフラ**: 
  - GitHub (バージョン管理)
  - Supabase Cloud (ホスティング)

### 2.2 システム構成図
```
┌─────────────────┐     ┌─────────────────┐     ┌─────────────────┐
│   ブラウザ      │────▶│   Supabase      │────▶│  PostgreSQL     │
│  (JavaScript)   │     │   (Auth/API)    │     │  (Database)     │
└─────────────────┘     └─────────────────┘     └─────────────────┘
```

## 3. 機能要件

### 3.1 認証機能

#### 3.1.1 ユーザー登録
- **機能概要**: メールアドレスとパスワードによる新規登録
- **入力項目**:
  - メールアドレス（必須）
  - パスワード（必須、8文字以上）
  - 名前（必須）
- **バリデーション**:
  - メールアドレス形式チェック
  - パスワード強度チェック
  - 重複登録チェック

#### 3.1.2 ログイン/ログアウト
- **機能概要**: 登録済みユーザーのログイン・ログアウト
- **セッション管理**: JWTトークンによる認証
- **自動ログアウト**: 7日間の非アクティブ後

### 3.2 プロファイル機能

#### 3.2.1 プロファイル作成・編集
- **基本情報**:
  - 名前
  - プロフィール画像
  - 役職（title）
  - 会社名（company）
  - 業界（industry）
  - 地域（location）
  - 自己紹介（bio）
  
- **スキル・興味**:
  - スキルタグ（複数選択可能）
  - 興味・関心タグ（複数選択可能）

#### 3.2.2 プロファイル表示
- **公開範囲**: 全ユーザーに公開
- **プライバシー設定**: 連絡先情報は接続後のみ表示

### 3.3 マッチング機能

#### 3.3.1 マッチングアルゴリズム
- **基本スコア計算**:
  ```javascript
  // スコア計算要素
  - プロファイル充実度: 15-30%
  - スキルマッチ: 最大15%
  - 地域一致: 8%
  - 業界一致: 8%
  - 興味の共通性: 最大6%
  - ランダム要素: ±10%（ガウス分布）
  ```

- **スコア範囲**: 15%〜95%
- **表示順序**: スコアの高い順

#### 3.3.2 マッチング表示
- **カード形式表示**:
  - プロフィール画像
  - 名前・役職・会社
  - マッチングスコア（%表示）
  - スキルタグ（最大3個表示）
  - レーダーチャート（6軸評価）
  
- **レーダーチャート項目**:
  1. スキル充実度
  2. 経験値
  3. 地域適合性
  4. 業界適合性
  5. 活動レベル
  6. 興味の一致度

#### 3.3.3 フィルタリング機能
- **フィルター項目**:
  - 業界
  - 地域
  - 興味・関心
  
- **検索機能**:
  - キーワード検索（全文検索）
  - リアルタイム検索（300msデバウンス）

### 3.4 コネクション機能

#### 3.4.1 コネクト申請
- **申請フロー**:
  1. 「コネクト申請」ボタンクリック
  2. 申請送信（pending状態）
  3. 相手に通知送信
  
- **ステータス管理**:
  - pending: 申請中
  - accepted: 承認済み
  - rejected: 拒否
  - blocked: ブロック

#### 3.4.2 プロファイル詳細表示
- **モーダル表示内容**:
  - 完全なプロファイル情報
  - マッチング詳細分析
  - 共通のスキル・興味
  - レーダーチャート（拡大版）
  - アクションボタン（コネクト申請、メッセージ、ブックマーク）

### 3.5 ダッシュボード機能

#### 3.5.1 統計情報表示
- **表示項目**:
  - 総メンバー数
  - 今月のイベント数
  - マッチング成功数
  
- **リアルタイム更新**: 1分ごとに自動更新

#### 3.5.2 アクティビティフィード
- **表示内容**:
  - 最新の活動履歴
  - 新規メンバー参加
  - イベント情報
  
- **フィルタリング**:
  - 期間指定（今日/今週/今月）
  - タイプ別（全て/メンバー/イベント）

### 3.6 メッセージング機能

#### 3.6.1 メッセージ送受信
- **送信条件**: コネクション成立後のみ
- **メッセージ形式**: テキストのみ（初期版）
- **既読管理**: 未実装（将来対応）

### 3.7 イベント機能

#### 3.7.1 イベント一覧表示
- **表示項目**:
  - イベント名
  - 開催日時
  - 場所
  - 参加者数
  
- **ソート機能**: 日付順/人気順

## 4. データベース設計

### 4.1 テーブル構造

#### 4.1.1 profiles テーブル
```sql
CREATE TABLE profiles (
    id UUID PRIMARY KEY REFERENCES auth.users(id),
    name TEXT NOT NULL,
    email TEXT NOT NULL,
    avatar_url TEXT,
    title TEXT,
    company TEXT,
    industry TEXT,
    location TEXT,
    bio TEXT,
    skills TEXT[] DEFAULT '{}',
    interests TEXT[] DEFAULT '{}',
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);
```

#### 4.1.2 connections テーブル
```sql
CREATE TABLE connections (
    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
    user_id UUID REFERENCES profiles(id),
    connected_user_id UUID REFERENCES profiles(id),
    status TEXT CHECK (status IN ('pending', 'accepted', 'rejected', 'blocked')),
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    UNIQUE(user_id, connected_user_id)
);
```

#### 4.1.3 messages テーブル
```sql
CREATE TABLE messages (
    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
    sender_id UUID REFERENCES profiles(id),
    receiver_id UUID REFERENCES profiles(id),
    content TEXT NOT NULL,
    is_read BOOLEAN DEFAULT FALSE,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);
```

#### 4.1.4 events テーブル
```sql
CREATE TABLE events (
    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
    title TEXT NOT NULL,
    description TEXT,
    event_date TIMESTAMP WITH TIME ZONE,
    location TEXT,
    organizer_id UUID REFERENCES profiles(id),
    max_participants INTEGER,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);
```

#### 4.1.5 meeting_minutes テーブル（将来実装）
```sql
CREATE TABLE meeting_minutes (
    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
    profile_id UUID REFERENCES profiles(id),
    meeting_title TEXT,
    meeting_date TIMESTAMP WITH TIME ZONE,
    summary TEXT,
    content TEXT,
    participants TEXT[],
    topics TEXT[],
    action_items JSONB,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);
```

### 4.2 Row Level Security (RLS) ポリシー

#### 4.2.1 profiles テーブル
- **読み取り**: 全ユーザーが全プロファイルを閲覧可能
- **更新**: 自分のプロファイルのみ編集可能

#### 4.2.2 connections テーブル
- **読み取り**: 自分が関係するコネクションのみ
- **作成**: 自分からの申請のみ
- **更新**: 双方向の承認が可能

#### 4.2.3 messages テーブル
- **読み取り**: 送信者または受信者のみ
- **作成**: コネクション成立者同士のみ

## 5. UI/UXデザイン

### 5.1 デザイン原則
- **レスポンシブデザイン**: モバイル、タブレット、デスクトップ対応
- **アクセシビリティ**: WCAG 2.1 AA準拠
- **パフォーマンス**: 初期表示3秒以内

### 5.2 カラースキーム
- **プライマリカラー**: #3498db（青）
- **セカンダリカラー**: #2ecc71（緑）
- **アクセントカラー**: #e74c3c（赤）
- **背景色**: #f8f9fa
- **テキスト色**: #2c3e50

### 5.3 フォント
- **見出し**: Inter (font-weight: 600-800)
- **本文**: Noto Sans JP (font-weight: 400)
- **コード**: Fira Code (等幅フォント)

### 5.4 レイアウト
- **グリッドシステム**: 12カラムグリッド
- **最大幅**: 1200px（デスクトップ）
- **余白**: 16px/24px/32px（モバイル/タブレット/デスクトップ）

## 6. セキュリティ要件

### 6.1 認証・認可
- **パスワード**: bcryptによるハッシュ化
- **セッション**: JWT (JSON Web Token)
- **HTTPS**: 全通信をSSL/TLSで暗号化

### 6.2 データ保護
- **個人情報**: RLSによるアクセス制御
- **SQLインジェクション対策**: パラメータ化クエリ使用
- **XSS対策**: 入力値のサニタイゼーション

### 6.3 プライバシー
- **データ収集**: 最小限の必要情報のみ
- **第三者提供**: なし（ユーザー同意なし）
- **データ削除**: ユーザーリクエストによる完全削除

## 7. パフォーマンス要件

### 7.1 レスポンスタイム
- **ページ読み込み**: 3秒以内（3G回線）
- **API応答**: 500ms以内
- **検索結果**: 1秒以内

### 7.2 同時接続数
- **想定**: 1,000ユーザー同時接続
- **ピーク時**: 5,000ユーザー/時

### 7.3 データ容量
- **プロファイル画像**: 最大5MB/ユーザー
- **メッセージ**: 無制限（テキストのみ）
- **バックアップ**: 日次自動バックアップ

## 8. 運用・保守

### 8.1 監視項目
- **システム稼働率**: 99.9%以上
- **エラー率**: 0.1%以下
- **レスポンスタイム**: 継続監視

### 8.2 バックアップ
- **頻度**: 日次（深夜2時）
- **保持期間**: 30日間
- **リストア時間**: 1時間以内

### 8.3 アップデート
- **定期メンテナンス**: 月1回（深夜）
- **緊急パッチ**: 随時対応
- **機能追加**: 四半期ごと

## 9. 今後の拡張予定

### 9.1 Phase 2（3ヶ月後）
- AIによる自動マッチング提案
- ビデオ通話機能
- カレンダー連携

### 9.2 Phase 3（6ヶ月後）
- モバイルアプリ（iOS/Android）
- 多言語対応（英語・中国語）
- 有料プラン導入

### 9.3 Phase 4（1年後）
- AI議事録解析（tl;dv連携）
- 企業アカウント機能
- APIプラットフォーム公開

## 10. 開発スケジュール

### 10.1 開発フェーズ
1. **要件定義**: 2週間
2. **基本設計**: 2週間
3. **詳細設計**: 1週間
4. **実装**: 6週間
5. **テスト**: 2週間
6. **リリース準備**: 1週間

**合計**: 約3ヶ月

### 10.2 マイルストーン
- **M1**: 認証・プロファイル機能完成
- **M2**: マッチング機能完成
- **M3**: メッセージング機能完成
- **M4**: 全機能統合テスト完了
- **M5**: 本番リリース

## 11. 成果物

### 11.1 ドキュメント
- 要件定義書（本書）
- 基本設計書
- 詳細設計書
- テスト仕様書
- 運用マニュアル

### 11.2 ソースコード
- フロントエンド（HTML/CSS/JavaScript）
- データベーススキーマ（SQL）
- 設定ファイル
- デプロイスクリプト

### 11.3 テスト
- 単体テストコード
- 統合テストシナリオ
- 性能テスト結果
- セキュリティ診断レポート

## 12. 制約事項

### 12.1 技術的制約
- ブラウザ対応：Chrome, Firefox, Safari, Edge（最新2バージョン）
- JavaScript有効必須
- Cookie有効必須

### 12.2 運用制約
- メンテナンス時間：月1回、最大2時間
- サポート時間：平日9:00-18:00
- SLA：99.9%

### 12.3 法的制約
- 個人情報保護法準拠
- GDPR対応（EU圏ユーザー）
- 利用規約・プライバシーポリシー必須

## 13. 用語定義

| 用語 | 説明 |
|------|------|
| プロファイル | ユーザーの基本情報、スキル、興味などを含む情報 |
| マッチング | ユーザー間の適合度を算出し、推奨する機能 |
| コネクション | ユーザー間の繋がり、承認により成立 |
| スコア | マッチング度を示す百分率（15%〜95%） |
| レーダーチャート | 6軸でユーザーの特性を視覚化したグラフ |

## 14. 改訂履歴

| 版数 | 日付 | 改訂内容 | 作成者 |
|------|------|----------|---------|
| 1.0 | 2025-01-31 | 初版作成 | INTERCONNECT開発チーム |

---

本要件定義書は、INTERCONNECTシステムの開発において、関係者間の認識を統一し、プロジェクトの成功を確実にするための基準文書として作成されました。