# ダッシュボード セットアップガイド

## 概要
INTERCONNECTのダッシュボード機能を有効にするための手順書です。

## 前提条件
- Supabaseプロジェクトが作成済み
- 環境変数が設定済み（`.env`ファイル）
- ユーザー登録/ログインが可能な状態

## セットアップ手順

### 1. Supabaseでテーブルを作成

1. [Supabase Dashboard](https://app.supabase.com)にログイン
2. 対象プロジェクトを選択
3. 左メニューから「SQL Editor」を開く
4. 新しいクエリを作成
5. `create-dashboard-tables.sql`の内容を全てコピー＆ペースト
6. 「Run」ボタンをクリックして実行

### 2. 初期データの投入

1. ブラウザで以下にアクセス：
   ```
   https://interconnect-auto-test.netlify.app/initialize-dashboard.html
   ```

2. 以下の順番でボタンをクリック：
   - 「テーブルを確認」 - 全てのテーブルが「OK」と表示されることを確認
   - 「初期データを作成」 - 統計データとアクティビティが作成される
   - 「サンプルデータを追加」 - サンプルイベントが追加される

### 3. ダッシュボードの確認

1. ダッシュボードページにアクセス：
   ```
   https://interconnect-auto-test.netlify.app/dashboard.html
   ```

2. 以下が正常に表示されることを確認：
   - 統計カードの数値（リアルタイムで更新）
   - 最近のアクティビティ（実際のデータ）
   - 今後のイベント（サンプルデータ）

## トラブルシューティング

### エラー: "user_activities table not found"
→ SQLスクリプトが正しく実行されていません。手順1を再確認してください。

### エラー: "permission denied for table dashboard_stats"
→ RLS（Row Level Security）ポリシーが正しく設定されていません。SQLスクリプトを再実行してください。

### 統計データが「0」のまま
→ 初期データの投入（手順2）を実行してください。

## 実装済み機能

1. **リアルタイム統計更新**
   - 総メンバー数
   - 今月のイベント数
   - マッチング成功数
   - 未読メッセージ数

2. **動的バッジ更新**
   - 通知バッジ（ベルアイコン）
   - メッセージバッジ（サイドバー）

3. **イベント詳細表示**
   - 「詳細を見る」ボタンでイベント情報をポップアップ表示

4. **エラーハンドリング**
   - テーブルが存在しない場合のフォールバック
   - ネットワークエラー時の再試行

## 今後の拡張予定

- [ ] WebSocketによるリアルタイム更新
- [ ] グラフ・チャート表示
- [ ] 高度なフィルタリング機能
- [ ] PWA対応