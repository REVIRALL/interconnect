/* ===========================
   サイドバー緊急修正CSS
   画面全体を覆う問題を解決
   =========================== */

/* モバイルでサイドバーが画面全体を覆わないように修正 */
@media (max-width: 991px) {
    .sidebar {
        width: 260px !important;  /* 全画面幅ではなく固定幅 */
        max-width: 80% !important; /* 画面の80%を超えない */
        left: -260px !important;  /* 初期状態は画面外 */
        transform: translateX(0) !important;
        transition: left 0.3s ease !important;
    }
    
    .sidebar.active {
        left: 0 !important; /* アクティブ時は表示 */
    }
    
    /* モバイルバックドロップを確実に表示 */
    .mobile-backdrop {
        display: none !important;
        position: fixed !important;
        top: 0 !important;
        left: 0 !important;
        right: 0 !important;
        bottom: 0 !important;
        background: rgba(0, 0, 0, 0.5) !important;
        z-index: 99 !important;
    }
    
    .mobile-backdrop.active {
        display: block !important;
    }
    
    /* メインコンテンツは常に表示 */
    .main-content {
        margin-left: 0 !important;
        width: 100% !important;
        transform: none !important;
        position: relative !important;
        z-index: 1 !important;
    }
}

/* デスクトップでの正しい表示を確保 */
@media (min-width: 992px) {
    .sidebar {
        position: fixed !important;
        left: 0 !important;
        top: 0 !important;
        width: 260px !important;
        height: 100vh !important;
        z-index: 100 !important;
        transform: none !important;
    }
    
    .main-content {
        margin-left: 260px !important;
        width: calc(100% - 260px) !important;
    }
    
    /* モバイルバックドロップは非表示 */
    .mobile-backdrop {
        display: none !important;
    }
}

/* サイドバーの基本スタイル */
.sidebar {
    position: fixed !important;
    top: 0 !important;
    height: 100vh !important;
    background: white !important;
    box-shadow: 2px 0 4px rgba(0,0,0,0.1) !important;
    overflow-y: auto !important;
    z-index: 100 !important;
}

/* キャッシュアウトボタンが隠れないように */
.points-summary {
    position: relative !important;
    z-index: 10 !important;
}

.cashout-button {
    position: relative !important;
    z-index: 50 !important;
    pointer-events: auto !important;
}

/* モバイルヘッダーのトグルボタン */
.mobile-menu-toggle {
    position: relative !important;
    z-index: 101 !important;
}

/* 特定のビューポートでの問題修正 */
@media (min-width: 768px) and (max-width: 991px) {
    /* タブレットでの表示調整 */
    .sidebar {
        width: 260px !important;
        left: -260px !important;
    }
    
    .sidebar.active {
        left: 0 !important;
    }
}

/* 小さいモバイルデバイス対応 */
@media (max-width: 479px) {
    .sidebar {
        width: 240px !important;
        left: -240px !important;
    }
    
    .sidebar.active {
        left: 0 !important;
    }
}