<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>動画ポスター生成</title>
</head>
<body>
    <h1>動画ポスター画像生成</h1>
    <p>動画の最初のフレームから静止画を生成します。</p>
    
    <video id="video" width="1920" height="1080" style="display:none;">
        <source src="assets/interconnect-top.mp4" type="video/mp4">
    </video>
    
    <canvas id="canvas" width="1920" height="1080"></canvas>
    
    <br><br>
    <button id="capture">ポスター画像を生成</button>
    <a id="download" download="video-poster.jpg" style="display:none;">ダウンロード</a>
    
    <script>
        const video = document.getElementById('video');
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        const captureBtn = document.getElementById('capture');
        const downloadLink = document.getElementById('download');
        
        video.addEventListener('loadeddata', function() {
            // 最初のフレームを表示
            video.currentTime = 1; // 1秒目のフレーム
        });
        
        video.addEventListener('seeked', function() {
            // キャンバスに描画
            ctx.drawImage(video, 0, 0, canvas.width, canvas.height);
            
            // JPEGとして出力
            canvas.toBlob(function(blob) {
                const url = URL.createObjectURL(blob);
                downloadLink.href = url;
                downloadLink.style.display = 'inline-block';
                downloadLink.textContent = 'ポスター画像をダウンロード';
            }, 'image/jpeg', 0.9);
        });
        
        captureBtn.addEventListener('click', function() {
            video.load();
        });
        
        // 自動実行
        window.addEventListener('load', function() {
            video.load();
        });
    </script>
</body>
</html>